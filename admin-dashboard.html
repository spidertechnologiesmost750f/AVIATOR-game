<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aviator Admin Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        body {
            background-color: #2d1414;
            color: white;
            height: 100vh;
            padding: 20px;
        }
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ff2d2d;
        }
        .admin-header h1 {
            color: #ff2d2d;
            font-size: 28px;
        }
        .admin-content {
            max-width: 800px;
            margin: 0 auto;
        }
        .busting-value {
            background-color: #6a1414;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        .busting-value-label {
            font-size: 24px;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
            margin-bottom: 15px;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        .busting-value-container {
            position: relative;
            width: 150px;
            height: 150px;
            margin: 0 auto;
        }
        .value-circle {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(45deg, #ff416c, #ff4b2b);
            box-shadow: 0 0 30px rgba(255, 75, 43, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(255, 65, 108, 0.7);
            }
            70% {
                box-shadow: 0 0 0 20px rgba(255, 65, 108, 0);
            }
            100% {
                box-shadow: 0 0 0 0 rgba(255, 65, 108, 0);
            }
        }
        .wave-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            border-radius: 50%;
            border: 2px solid rgba(255, 65, 108, 0.5);
            transform: translate(-50%, -50%);
            animation: wave 4s linear infinite;
            opacity: 0;
        }
        .wave-circle:nth-child(2) {
            animation-delay: 1s;
        }
        .wave-circle:nth-child(3) {
            animation-delay: 2s;
        }
        .wave-circle:nth-child(4) {
            animation-delay: 3s;
        }
        @keyframes wave {
            0% {
                width: 0px;
                height: 0px;
                opacity: 0.8;
                border-width: 4px;
            }
            100% {
                width: 300px;
                height: 300px;
                opacity: 0;
                border-width: 1px;
            }
        }
        #nextBustValue {
            color: white;
            font-weight: bold;
            font-size: 36px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            z-index: 11;
        }
        .plane-container {
            position: absolute;
            bottom: -30px;
            right: 40px;
            width: 100px;
            height: 100px;
            z-index: 9;
        }
        .hanging-plane {
            position: absolute;
            width: 60px;
            height: 40px;
            bottom: 20px;
            right: 10px;
            transform: rotate(15deg);
            animation: swing 5s ease-in-out infinite;
            transform-origin: top center;
        }
        @keyframes swing {
            0% { transform: rotate(15deg); }
            50% { transform: rotate(-15deg); }
            100% { transform: rotate(15deg); }
        }
        .plane-ring {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid rgba(255, 75, 43, 0.8);
            bottom: 40px;
            right: 30px;
            animation: float 3s ease-in-out infinite;
        }
        .plane-ring:nth-of-type(2) {
            width: 15px;
            height: 15px;
            bottom: 60px;
            right: 50px;
            animation-delay: 0.5s;
        }
        .plane-ring:nth-of-type(3) {
            width: 25px;
            height: 25px;
            bottom: 70px;
            right: 20px;
            animation-delay: 1s;
        }
        @keyframes float {
            0% { transform: translateY(0); opacity: 0.3; }
            50% { transform: translateY(-20px); opacity: 0.8; }
            100% { transform: translateY(-40px); opacity: 0; }
        }
        .bubble {
            position: absolute;
            background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8), rgba(255, 75, 43, 0.4));
            border-radius: 50%;
            animation: bubble-float 8s ease-in-out infinite;
        }
        .bubble:nth-of-type(1) {
            width: 15px;
            height: 15px;
            bottom: 10px;
            right: 60px;
        }
        .bubble:nth-of-type(2) {
            width: 10px;
            height: 10px;
            bottom: 30px;
            right: 80px;
            animation-delay: 2s;
        }
        .bubble:nth-of-type(3) {
            width: 20px;
            height: 20px;
            bottom: 50px;
            right: 70px;
            animation-delay: 4s;
        }
        @keyframes bubble-float {
            0% { transform: translateY(0) translateX(0); opacity: 0.5; }
            25% { transform: translateY(-30px) translateX(-10px); opacity: 0.8; }
            50% { transform: translateY(-60px) translateX(5px); opacity: 0.6; }
            75% { transform: translateY(-90px) translateX(-5px); opacity: 0.3; }
            100% { transform: translateY(-120px) translateX(0); opacity: 0; }
        }
        .game-controls {
            margin-top: 15px;
            margin-bottom: 20px;
        }
        .game-controls button {
            background-color: #ff2d2d;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            margin-right: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .game-controls button:hover {            background-color: #ff4b2b;            transform: translateY(-2px);            box-shadow: 0 4px 8px rgba(255, 75, 43, 0.3);        }        .game-controls button.active {            background-color: #2ecc71;            box-shadow: 0 4px 8px rgba(46, 204, 113, 0.3);        }
        .predefined-values {
            background-color: #3c1414;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .predefined-values h3 {
            margin-bottom: 10px;
            color: #ff2d2d;
        }
        #bustValuesList {
            margin-bottom: 15px;
        }
        #bustValuesList div {
            padding: 5px 0;
        }
        input[type="number"] {
            padding: 8px;
            border: none;
            border-radius: 5px;
            margin-right: 10px;
        }
        button#addBustValue {
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 8px 15px;
            cursor: pointer;
        }
        .betting-sites {
            margin-top: 20px;
            background-color: white;
            border-radius: 5px;
            padding: 15px;
            color: #000;
        }
        .betting-sites h3 {
            text-align: center;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #000;
        }
        .betting-sites-container {
            display: flex;
            position: relative;
        }
        .betting-sites-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .betting-site {
            border-radius: 5px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .betting-site:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .betting-site.selected {
            box-shadow: 0 0 0 2px #ff2d2d, 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .betting-site img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        .divider {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 2px;
            background-color: #ff2d2d;
            transform: translateX(-50%);
        }
        .betting-site-airplane {
            width: 50px;
            height: 40px;
            margin: 20px auto 0;
            display: block;
            fill: #ff2d2d;
        }
        .buttons-container {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }
        .back-button, .logout-button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        .back-button {
            background-color: #3498db;
            color: white;
        }
        .logout-button {
            background-color: #6a1414;
            color: white;
        }
        @media (max-width: 600px) {
            .busting-value-container {
                width: 120px;
                height: 120px;
            }
            .busting-value-label {
                font-size: 20px;
            }
            #nextBustValue {
                font-size: 28px;
            }
            .plane-container {
                transform: scale(0.8);
                right: 20px;
            }
        }
        /* New styles for game status */
        .game-status {
            background-color: #3c1414;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            margin-bottom: 20px;
            text-align: center;
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        .game-status h3 {
            color: #ff2d2d;
            margin-bottom: 15px;
            font-size: 18px;
            text-transform: uppercase;
        }
        .status-indicators {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
        }
        .status-indicator {
            background-color: #6a1414;
            padding: 15px;
            border-radius: 8px;
            min-width: 120px;
            text-align: center;
        }
        .status-indicator .label {
            font-size: 14px;
            color: #ccc;
            margin-bottom: 5px;
        }
        .status-indicator .value {
            font-size: 20px;
            font-weight: bold;
            color: white;
        }
        .status-indicator.active .value {
            color: #2ecc71;
        }
        .status-indicator.inactive .value {
            color: #e74c3c;
        }
        .live-preview {
            text-align: center;
            margin-top: 20px;
        }
        .preview-button {
            background-color: #ff416c;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        .preview-button:hover {
            background-color: #ff4b2b;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(255, 75, 43, 0.3);
        }
        #refreshCounter {
            margin-top: 10px;
            font-size: 12px;
            color: #ccc;
        }
    </style>
</head>
<body>
    <div class="admin-content">
        <div class="admin-header">
            <h1>Aviator Admin Dashboard</h1>
            <div class="buttons-container">
                <button class="back-button" id="backToGame">Back to Game</button>
                <button class="logout-button" id="logoutButton">Logout</button>
            </div>
        </div>
        
        <div class="busting-value">
            <div class="busting-value-label">Next busting value</div>
            <div id="exactPredictionIndicator" style="display: block; color: #2ecc71; font-weight: bold; margin-bottom: 5px;">
                EXACT PREDICTION ACTIVE
            </div>
            <div class="busting-value-container">
                <div class="value-circle">
                    <span id="nextBustValue">2.00x</span>
                </div>
                <div class="wave-circle"></div>
                <div class="wave-circle"></div>
                <div class="wave-circle"></div>
                <div class="wave-circle"></div>
            </div>

            <div class="plane-container">
                <svg class="hanging-plane" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path fill="#ff416c" d="M22 16.21v-1.895L14 8V4a2 2 0 0 0-4 0v4L2 14.315v1.895l8-2.63V18l-3 2v2l5-1 5 1v-2l-3-2v-4.42l8 2.63z"/>
                </svg>
                <div class="plane-ring"></div>
                <div class="plane-ring"></div>
                <div class="plane-ring"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
                <div class="bubble"></div>
            </div>
        </div>
        
        <div class="game-controls">            <button id="forceBustButton">Force Bust</button>            <button id="setPredefinedButton">Set Predefined Values</button>            <button id="exactPredictionButton" class="active">Exact Prediction Mode</button>            <button id="refreshValueButton">Refresh Values</button>        </div>
        
        <!-- New game status section -->
        <div class="game-status">
            <h3>Live Game Status</h3>
            <div class="status-indicators">
                <div class="status-indicator" id="gameActiveStatus">
                    <div class="label">Game Status</div>
                    <div class="value">Waiting</div>
                </div>
                <div class="status-indicator" id="currentMultiplierStatus">
                    <div class="label">Current Multiplier</div>
                    <div class="value">1.00x</div>
                </div>
                <div class="status-indicator" id="betsPlacedStatus">
                    <div class="label">Bets Placed</div>
                    <div class="value">0</div>
                </div>
            </div>
            <div class="live-preview">
                <button class="preview-button" id="openGameButton">Open Game in New Window</button>
                <div id="refreshCounter">Auto-refreshing in <span id="countdown">5</span>s</div>
            </div>
        </div>
        
        <div class="predefined-values" id="predefinedValues">
            <h3>Predefined Bust Values:</h3>
            <div id="bustValuesList"></div>
            <div>
                <input type="number" id="newBustValue" min="1.01" step="0.01" placeholder="New value">
                <button id="addBustValue">Add</button>
            </div>
            
            <h3 style="margin-top: 20px;">Set Exact Bust Value:</h3>
            <div style="display: flex; margin-top: 10px;">
                <input type="number" id="exactBustValue" min="1.01" step="0.01" placeholder="Enter exact bust value" 
                    style="flex: 1; margin-right: 10px;">
                <button id="setExactBustValue" style="background-color: #e74c3c;">Set Value</button>
            </div>
        </div>
        
        <div class="betting-sites">
            <h3>CHOOSE YOUR BETTING SITE</h3>
            <div class="betting-sites-container">
                <div class="betting-sites-column">
                    <div class="betting-site" data-site="hollywoodbets">
                        <img src="https://cdn.hollywoodbets.net/images/Logo_Alt/hollywoodbets.svg" alt="Hollywoodbets">
                    </div>
                    <div class="betting-site" data-site="betwinner">
                        <img src="https://betwinner.com/assets/landing/images/logo/logo-blue.svg" alt="Betwinner">
                    </div>
                    <div class="betting-site" data-site="pinup">
                        <img src="https://pinup.bet/wp-content/uploads/sites/2/2022/01/pin-up_logo.svg" alt="Pin-up">
                    </div>
                    <div class="betting-site" data-site="betking">
                        <img src="https://logowik.com/content/uploads/images/betking-betting4635.jpg" alt="BetKing">
                    </div>
                    <div class="betting-site" data-site="lottostar">
                        <img src="https://lottostar.co.za/images/social-banner.png" alt="LottoStar">
                    </div>
                    <div class="betting-site" data-site="melbet">
                        <img src="https://apkresult.com/logos/melbet-apk.png" alt="MelBet">
                    </div>
                </div>
                <div class="divider"></div>
                <div class="betting-sites-column">
                    <div class="betting-site" data-site="sportybet">
                        <img src="https://www.sportybetng.com/assets/img/sportybet-logo-ng.svg" alt="SportyBet">
                    </div>
                    <div class="betting-site" data-site="premierbet">
                        <img src="https://www.premierbet.co.ke/front/img/premierbet_logo.svg" alt="PremierBet">
                    </div>
                    <div class="betting-site" data-site="1win">
                        <img src="https://1win-bet.com/wp-content/uploads/2022/11/1win-logo.png" alt="1Win">
                    </div>
                    <div class="betting-site" data-site="1xbet">
                        <img src="https://1xbet.co.ke/wp-content/uploads/sites/36/2022/02/1xBet-Logo.svg" alt="1xBet">
                    </div>
                    <div class="betting-site" data-site="msport">
                        <img src="https://www.msport.com/images/site/home/logo.png" alt="MSport">
                    </div>
                    <div class="betting-site" data-site="superbet">
                        <img src="https://www.superbet.ro/static/media-ro/superbet.svg" alt="SuperBet">
                    </div>
                </div>
            </div>
            <svg class="betting-site-airplane" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M22 16.21v-1.895L14 8V4a2 2 0 0 0-4 0v4L2 14.315v1.895l8-2.63V18l-3 2v2l5-1 5 1v-2l-3-2v-4.42l8 2.63z"/>
            </svg>
        </div>
    </div>

    <script>
        // Check if admin is authenticated
        document.addEventListener('DOMContentLoaded', function() {
            const isAuthenticated = sessionStorage.getItem('adminAuthenticated') === 'true';
            
            if (!isAuthenticated) {
                // Redirect to login page if not authenticated
                window.location.href = 'admin-login.html';
                return;
            }
            
            // Admin variables
            let predefinedBustValues = [1.50, 2.25, 3.75, 1.15, 10.00];
            let currentBustValueIndex = 0;
            let nextBustValue = predefinedBustValues[0];
            let adminMode = false;
            let exactPredictionMode = true; // Default to exact prediction mode
            let updateInterval;
            let countdownInterval;
            let countdownValue = 5;
            
            // Get from session storage if available
            const storedValues = sessionStorage.getItem('predefinedBustValues');
            if (storedValues) {
                predefinedBustValues = JSON.parse(storedValues);
            }
            
            const storedIndex = sessionStorage.getItem('currentBustValueIndex');
            if (storedIndex) {
                currentBustValueIndex = parseInt(storedIndex);
            }
            
            const storedBustValue = sessionStorage.getItem('nextBustValue');
            if (storedBustValue) {
                nextBustValue = parseFloat(storedBustValue);
            }
            
            const storedAdminMode = sessionStorage.getItem('adminMode');
            if (storedAdminMode) {
                adminMode = storedAdminMode === 'true';
            }
            
            // Get stored exact prediction mode state
            const storedExactMode = sessionStorage.getItem('exactPredictionMode');
            if (storedExactMode) {
                exactPredictionMode = storedExactMode === 'true';
                if (exactPredictionMode) {
                    document.getElementById('exactPredictionButton').classList.add('active');
                } else {
                    document.getElementById('exactPredictionButton').classList.remove('active');
                }
            }
            
            // DOM elements
            const nextBustValueDisplay = document.getElementById('nextBustValue');
            const bustValuesList = document.getElementById('bustValuesList');
            const forceBustButton = document.getElementById('forceBustButton');
            const setPredefinedButton = document.getElementById('setPredefinedButton');
            const exactPredictionButton = document.getElementById('exactPredictionButton');
            const addBustValueButton = document.getElementById('addBustValue');
            const backButton = document.getElementById('backToGame');
            const logoutButton = document.getElementById('logoutButton');
            const refreshValueButton = document.getElementById('refreshValueButton');
            const gameActiveStatus = document.getElementById('gameActiveStatus');
            const currentMultiplierStatus = document.getElementById('currentMultiplierStatus');
            const betsPlacedStatus = document.getElementById('betsPlacedStatus');
            const openGameButton = document.getElementById('openGameButton');
            const countdownElement = document.getElementById('countdown');
            
            // Update next bust value display
            nextBustValueDisplay.textContent = nextBustValue.toFixed(2) + 'x';
            
            // Ensure the nextBustValue is set in sessionStorage immediately
            if (exactPredictionMode) {
                sessionStorage.setItem('adminSetBustValue', nextBustValue.toFixed(2));
            }
            sessionStorage.setItem('nextBustValue', nextBustValue.toFixed(2));
            
            // Update predefined values list
            updatePredefinedValuesList();
            
            // Update UI based on admin mode
            setPredefinedButton.textContent = adminMode ? 'Using Predefined' : 'Use Predefined';
            
            // Start status updates
            updateGameStatus();
            updateInterval = setInterval(updateGameStatus, 5000); // Update every 5 seconds
            startCountdown();
            
            // Event listeners
            forceBustButton.addEventListener('click', function() {
                // Store that we want to force a bust
                sessionStorage.setItem('forceBust', 'true');
                
                // Visual feedback
                forceBustButton.textContent = "Busting...";
                forceBustButton.style.backgroundColor = "#e74c3c";
                
                // Reset after 2 seconds
                setTimeout(() => {
                    forceBustButton.textContent = "Force Bust";
                    forceBustButton.style.backgroundColor = "#ff2d2d";
                }, 2000);
                
                updateGameStatus(); // Update immediately
            });
            
            setPredefinedButton.addEventListener('click', function() {
                adminMode = !adminMode;
                setPredefinedButton.textContent = adminMode ? 'Using Predefined' : 'Use Predefined';
                sessionStorage.setItem('adminMode', adminMode);
                
                // If turning on predefined mode, immediately set the next value
                if (adminMode) {
                    // Get the next predefined value
                    nextBustValue = parseFloat(predefinedBustValues[currentBustValueIndex].toFixed(2));
                    
                    // Update the next bust value in session storage so the game will use it
                    sessionStorage.setItem('adminSetBustValue', nextBustValue.toFixed(2));
                    sessionStorage.setItem('nextBustValue', nextBustValue.toFixed(2));
                    
                    // Update display
                    nextBustValueDisplay.textContent = nextBustValue.toFixed(2) + 'x';
                    
                    // Update the index for next time
                    currentBustValueIndex = (currentBustValueIndex + 1) % predefinedBustValues.length;
                    sessionStorage.setItem('currentBustValueIndex', currentBustValueIndex.toString());
                }
            });
            
            addBustValueButton.addEventListener('click', function() {
                const newValueInput = document.getElementById('newBustValue');
                let newValue = parseFloat(newValueInput.value);
                
                if (newValue && newValue >= 1.01) {
                    // Format to 2 decimal places to ensure exact matching
                    newValue = parseFloat(newValue.toFixed(2));
                    predefinedBustValues.push(newValue);
                    sessionStorage.setItem('predefinedBustValues', JSON.stringify(predefinedBustValues));
                    updatePredefinedValuesList();
                    newValueInput.value = '';
                    
                    // Visual feedback
                    addBustValueButton.textContent = "Added!";
                    setTimeout(() => {
                        addBustValueButton.textContent = "Add";
                    }, 1000);
                }
            });
            
            refreshValueButton.addEventListener('click', function() {
                updateGameStatus();
                
                // Get the predefined value for the next round
                if (adminMode || exactPredictionMode) {
                    // Get the next predefined value
                    nextBustValue = parseFloat(predefinedBustValues[currentBustValueIndex].toFixed(2));
                    
                    // Update display
                    nextBustValueDisplay.textContent = nextBustValue.toFixed(2) + 'x';
                    
                    // Update the next bust value in session storage
                    sessionStorage.setItem('nextBustValue', nextBustValue.toFixed(2));
                    
                    // If in exact prediction mode, set the adminSetBustValue for exact prediction
                    if (exactPredictionMode) {
                        sessionStorage.setItem('adminSetBustValue', nextBustValue.toFixed(2));
                    }
                    
                    // Update the index for next time
                    currentBustValueIndex = (currentBustValueIndex + 1) % predefinedBustValues.length;
                    sessionStorage.setItem('currentBustValueIndex', currentBustValueIndex.toString());
                }
                
                refreshValueButton.textContent = "Refreshed!";
                setTimeout(() => {
                    refreshValueButton.textContent = "Refresh Values";
                }, 1000);
                
                // Reset countdown
                countdownValue = 5;
                countdownElement.textContent = countdownValue;
            });
            
            backButton.addEventListener('click', function() {
                window.location.href = 'aviator.html';
            });
            
            logoutButton.addEventListener('click', function() {
                sessionStorage.removeItem('adminAuthenticated');
                clearInterval(updateInterval);
                clearInterval(countdownInterval);
                window.location.href = 'admin-login.html';
            });
            
            openGameButton.addEventListener('click', function() {
                window.open('aviator.html', 'aviatorGame', 'width=800,height=600');
            });
            
            // Betting site selection handling
            document.querySelectorAll('.betting-site').forEach(site => {
                site.addEventListener('click', () => {
                    // Remove previously selected site
                    document.querySelectorAll('.betting-site.selected').forEach(selected => {
                        selected.classList.remove('selected');
                    });
                    
                    // Mark this site as selected
                    site.classList.add('selected');
                    
                    // Store selected site in session storage
                    const selectedSite = site.getAttribute('data-site');
                    sessionStorage.setItem('selectedBettingSite', selectedSite);
                    
                    // Show notification
                    const siteName = selectedSite.charAt(0).toUpperCase() + selectedSite.slice(1); // Capitalize first letter
                    site.style.transform = 'scale(1.05)';
                    setTimeout(() => {
                        site.style.transform = '';
                    }, 200);
                });
            });
            
            // Load previously selected site if any
            const selectedSite = sessionStorage.getItem('selectedBettingSite');
            if (selectedSite) {
                const siteElement = document.querySelector(`.betting-site[data-site="${selectedSite}"]`);
                if (siteElement) {
                    siteElement.classList.add('selected');
                }
            }
            
            // Function to update game status from session storage
            function updateGameStatus() {
                // Get latest values from session storage
                const gameActive = sessionStorage.getItem('gameActive') === 'true';
                const currentMultiplier = parseFloat(sessionStorage.getItem('currentMultiplier')) || 1.00;
                const betsPlaced = parseInt(sessionStorage.getItem('betsPlaced')) || 0;
                
                // Only update the display, don't overwrite the admin's set value
                const gameNextBustValue = sessionStorage.getItem('nextBustValue');
                if (gameNextBustValue && !adminMode) {
                    // Only update if we're not in admin mode
                    nextBustValue = parseFloat(gameNextBustValue);
                    nextBustValueDisplay.textContent = nextBustValue.toFixed(2) + 'x';
                }
                
                // Update game status indicators
                if (gameActive) {
                    gameActiveStatus.classList.add('active');
                    gameActiveStatus.classList.remove('inactive');
                    gameActiveStatus.querySelector('.value').textContent = 'Active';
                } else {
                    gameActiveStatus.classList.add('inactive');
                    gameActiveStatus.classList.remove('active');
                    gameActiveStatus.querySelector('.value').textContent = 'Waiting';
                    
                    // If the game is not active and we're in admin mode or exact prediction mode, set the next bust value                    if (!gameActive && (adminMode || exactPredictionMode)) {                        // Get the next predefined value                        nextBustValue = parseFloat(predefinedBustValues[currentBustValueIndex].toFixed(2));                                                // Update the next bust value in session storage                        sessionStorage.setItem('nextBustValue', nextBustValue.toFixed(2));                                                // If in exact prediction mode, set the adminSetBustValue for exact prediction                        if (exactPredictionMode) {                            sessionStorage.setItem('adminSetBustValue', nextBustValue.toFixed(2));                        }                                                // Update display                        nextBustValueDisplay.textContent = nextBustValue.toFixed(2) + 'x';                                                // Update the index for next time                        currentBustValueIndex = (currentBustValueIndex + 1) % predefinedBustValues.length;                        sessionStorage.setItem('currentBustValueIndex', currentBustValueIndex.toString());                    }
                }
                
                currentMultiplierStatus.querySelector('.value').textContent = currentMultiplier.toFixed(2) + 'x';
                betsPlacedStatus.querySelector('.value').textContent = betsPlaced;
                
                // Store game status in session storage for the main game to read
                sessionStorage.setItem('adminChecked', 'true');
                sessionStorage.setItem('adminCheckTime', Date.now());
                
                // Reset countdown
                countdownValue = 5;
                countdownElement.textContent = countdownValue;
            }
            
            // Start countdown timer
            function startCountdown() {
                countdownInterval = setInterval(() => {
                    countdownValue--;
                    if (countdownValue <= 0) {
                        countdownValue = 5;
                        updateGameStatus();
                    }
                    countdownElement.textContent = countdownValue;
                }, 1000);
            }
            
            // Update the list of predefined bust values
            function updatePredefinedValuesList() {
                bustValuesList.innerHTML = '';
                predefinedBustValues.forEach((value, index) => {
                    const valueElement = document.createElement('div');
                    valueElement.textContent = `${index + 1}. ${value.toFixed(2)}x`;
                    valueElement.style.cursor = 'pointer';
                    valueElement.title = 'Click to use this value next';
                    
                    // Allow clicking on a value to select it for the next round
                    valueElement.addEventListener('click', () => {
                        nextBustValue = parseFloat(value.toFixed(2));
                        
                        // Set the value for exact prediction
                        if (exactPredictionMode) {
                            sessionStorage.setItem('adminSetBustValue', nextBustValue.toFixed(2));
                        }
                        
                        // Update display
                        nextBustValueDisplay.textContent = nextBustValue.toFixed(2) + 'x';
                        
                        // Visual feedback
                        valueElement.style.color = '#ff416c';
                        setTimeout(() => {
                            valueElement.style.color = '';
                        }, 500);
                    });
                    
                    bustValuesList.appendChild(valueElement);
                });
            }
            
            // Update the exact prediction indicator based on current mode
            const exactPredictionIndicator = document.getElementById('exactPredictionIndicator');
            exactPredictionIndicator.style.display = exactPredictionMode ? 'block' : 'none';
            
            // New event listener for exact prediction button
            exactPredictionButton.addEventListener('click', function() {
                exactPredictionMode = !exactPredictionMode;
                
                if (exactPredictionMode) {
                    exactPredictionButton.classList.add('active');
                    exactPredictionIndicator.style.display = 'block';
                    
                    // Set the next bust value immediately
                    sessionStorage.setItem('adminSetBustValue', nextBustValue.toFixed(2));
                    
                    // Visual feedback
                    exactPredictionButton.textContent = "Exact Prediction Mode ON";
                    setTimeout(() => {
                        exactPredictionButton.textContent = "Exact Prediction Mode";
                    }, 1500);
                } else {
                    exactPredictionButton.classList.remove('active');
                    exactPredictionIndicator.style.display = 'none';
                    
                    // Remove any set bust value
                    sessionStorage.removeItem('adminSetBustValue');
                    
                    // Visual feedback
                    exactPredictionButton.textContent = "Exact Prediction Mode OFF";
                    setTimeout(() => {
                        exactPredictionButton.textContent = "Exact Prediction Mode";
                    }, 1500);
                }
                
                // Store the mode
                sessionStorage.setItem('exactPredictionMode', exactPredictionMode.toString());
                
                updateGameStatus(); // Update immediately
            });
            
            // Event listener for the set exact bust value button
            document.getElementById('setExactBustValue').addEventListener('click', function() {
                const exactBustValueInput = document.getElementById('exactBustValue');
                let exactValue = parseFloat(exactBustValueInput.value);
                
                if (exactValue && exactValue >= 1.01) {
                    // Format to 2 decimal places
                    exactValue = parseFloat(exactValue.toFixed(2));
                    
                    // Update the display
                    nextBustValue = exactValue;
                    nextBustValueDisplay.textContent = nextBustValue.toFixed(2) + 'x';
                    
                    // Set the exact prediction mode to true if not already
                    if (!exactPredictionMode) {
                        exactPredictionMode = true;
                        exactPredictionButton.classList.add('active');
                        exactPredictionIndicator.style.display = 'block';
                        sessionStorage.setItem('exactPredictionMode', 'true');
                    }
                    
                    // Set the value in session storage for the game to use
                    sessionStorage.setItem('adminSetBustValue', exactValue.toFixed(2));
                    sessionStorage.setItem('nextBustValue', exactValue.toFixed(2));
                    
                    // Visual feedback
                    const setExactBustValueButton = document.getElementById('setExactBustValue');
                    setExactBustValueButton.textContent = "Set!";
                    setTimeout(() => {
                        setExactBustValueButton.textContent = "Set Value";
                    }, 1000);
                    
                    // Clear the input
                    exactBustValueInput.value = '';
                }
            });
            
            // Clean up intervals when page is unloaded
            window.addEventListener('beforeunload', function() {
                clearInterval(updateInterval);
                clearInterval(countdownInterval);
            });
        });
    </script>
</body>
</html> 